"use strict";$.fn.MegaJs=function(e={}){var t=class{constructor(e,t={}){const i=this;switch(this.settings=$.extend({},{items:" > li",spacing:10,vertical:!1,breakPoint:991,wrapper:!1,megaSub:!0,megaSubItems:"> ul, .dropdown-menu, .sub-menu"},t),this.removeSubClass=i.settings.megaSubItems.replace(/[^a-z0-9\-_+]+/gi," "),console.log("this.removeSubClass",this.removeSubClass),this.activeClass="mega-active",this.$NavMenu=e,this.NavRect=e.get(0).getBoundingClientRect(),this.megaItems=[],this.isMobile=!1,this.showing=!1,this.timeOut=void 0,this.animation="",this.animation="",this.$wrapper=$.noop,this.verAlign="right",this.$stickyEl=$.noop,this.stickyType="",this.isInstalled=!1,this.touchSupport=!1,"ontouchstart"in document.documentElement&&(this.touchSupport=!0),this.settings.wrapper){case"parent":this.$wrapper=this.$NavMenu.parent();break;default:i.settings.wrapper?this.$wrapper=$(i.settings.wrapper):this.$wrapper=$("html")}this.$NavMenu.addClass(this.settings.vertical?"mega-mod-vertical":"mega-mod-horizontal"),this.$drop=$('<div class="mega-drop"/>'),$("body").append(this.$drop),this.$drop.on("click.megajs",function(){$.each(i.megaItems,function(e,t){i.closeMega(t,i.$drop)}),i.closeBG()}),this.firstInstall(),this.checkStickyTypeNav(),i.intMenu();var a=null;$(window).resize(function(){i.checkStickyTypeNav(),i.intMenu(),a&&clearTimeout(a),a=setTimeout(async function(){i.detectNavAlign(),i.detectDevice(),i.sleep(30),i.checkStickyTypeNav(),i.intMenu(),console.log("Resize_Called"),i.initWindowResizeEvent()},500)});var s=null;$(window).scroll(async function(){s&&clearTimeout(s),s=setTimeout(function(){i.NavRect=e.get(0).getBoundingClientRect(),i.scrollTop=$(window).scrollTop(),i.navOffset=i.$NavMenu.offset()},100)}.bind(this)),i.initWindowResizeEvent()}checkStickyTypeNav(){var e=this;let t=this.$NavMenu;var i="",a=!0,s=30,o=0;e.stickyType="",e.$stickyEl=$.noop;do{o++,i=t.prop("tagName"),"fixed"===t.css("position")&&(a=!1,e.stickyType="fixed",e.$stickyEl=t),"sticky"===t.css("position")&&(a=!1,e.stickyType="sticky",e.$stickyEl=t),"BODY"===i&&(a=!1),o>=s&&(a=!1),a&&(t=t.parent())}while(a)}async intMenu(){this.detectNavAlign(),this.detectDevice(),this.setupMenuItems(),this.settings.vertical}sleep(e){return new Promise(t=>setTimeout(t,e))}toInt(e,t=null){return Number.isInteger(e)?e:(e=""+e,0===e.length?t:("px"===e.substring(e.length-2)&&(e=e.substring(0,e.length-2)),isFinite(e)?Number(e):t))}detectNavAlign(){if(this.navAlign=this.$NavMenu.attr("data-align")||!1,!this.navAlign){var e=this.$NavMenu.css("text-align"),t=this.$NavMenu.css("justify-content"),i=this.$NavMenu.css("display"),a=this.$NavMenu.css("margin-left"),s=this.$NavMenu.css("margin-right");s=this.toInt(s),a=this.toInt(a),"flex"===i?"center"===t&&(this.navAlign="center"):"center"===e&&Math.abs(s-a)<20&&(this.navAlign="center")}}detectDevice(){this.windowWidth=$(window).width(),this.windowHeight=$(window).width();var e=this.$wrapper.offset(),t=this.$wrapper.height(),i=this.$wrapper.width();this.wrapperRect={width:i,height:t,left:e.left,right:e.left+i,top:e.top},this.settings.vertical?this.NavRect.x>this.wrapperRect.width/2+this.wrapperRect.left&&(this.verAlign="left"):console.log("______RIGHT",e),this.isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),this.windowWidth<=this.settings.breakPoint?this.isMobile=!0:this.isMobile=!1}getBorder(e){return{top:this.toInt(e.css("border-top-width")),left:this.toInt(e.css("border-left-width")),right:this.toInt(e.css("border-right-width")),bottom:this.toInt(e.css("border-bottom-width"))}}getItemBase(e,t,i,a){var s=this,o=e.find(".mega-arr"),n=e.find(".mega-header");o.length||(o=$('<div class="mega-arr"><div class="mega-arr-inner"></div></div>'),e.append(o)),n.length||(n=$('<div class="mega-header"><div class="mega-close"></div></div>'),e.prepend(n));var r={id:i,megaId:a,$navLi:t,$mega:e,$arrow:o,$header:n,animation:e.attr("data-animation")||s.animation,align:e.attr("data-align")||"auto",innerAlign:e.attr("data-inner-align")||""};return s.calcItemCSS(r),r}calcItemCSS(e){var t=this,i=e.$mega.get(0).getBoundingClientRect(),a=t.toInt(e.$mega.outerWidth()),s=t.toInt(e.$mega.outerHeight()),o=t.toInt(e.$arrow.width()),n=t.toInt(e.$arrow.height()),r=e.$navLi.offset(),l=e.$navLi.get(0).getBoundingClientRect(),g=t.getBorder(e.$mega),c=e.$mega.css("background-color");e.$arrow.find(".mega-arr-inner").css({"background-color":c}),e.center={x:r.left+e.$navLi.width()/2,y:r.top+e.$navLi.height()/2},e.border=g,e.liRect=l,e.liOffset=r,e.megaItemRect=i,e.megaItemWidth=a,e.megaItemHeight=s+g.top+g.bottom,e.arrowWidth=o,e.arrowHeight=n}firstInstall(){let e=this;$(e.settings.items,e.$NavMenu).each(async function(t){var i=$(this),a=i.attr("id"),s=i.attr("data-mega")||"#m-"+a,o=$(s);if(!o.length){if(e.settings.megaSub&&e.settings.megaSubItems){o=i.children(e.settings.megaSubItems);s="mega-auto-"+t+"-"+(new Date).getTime();o.length&&i.attr("data-mega",s).find("a").removeAttr("data-toggle").removeAttr("aria-expanded"),o.addClass("mega-nav-sub").removeClass(e.removeSubClass),o.wrap("<div></div>"),o=o.parent(),o.wrapInner('<div class="mega-inner"></div>'),o.attr("data-mega",s)}if(!o.length)return}o.addClass("mega-wrapper"),$("body").append(o),o.addClass("mi-"+t),o.addClass("mega-"+(e.settings.vertical?"vertical":"horizontal")),i.addClass("mega-enabled");var n=e.getItemBase(o,i,a,s);e.megaItems.push(n)})}setupMenuItems(){let e=this;e.isMobile?e.$NavMenu.addClass("mega-mobile").removeClass("mega-desktop"):e.$NavMenu.addClass("mega-desktop").removeClass("mega-mobile"),$.each(e.megaItems,async function(t,i){e.isMobile?i.$mega.addClass("mega-mobile").removeClass("mega-desktop"):i.$mega.addClass("mega-desktop").removeClass("mega-mobile"),i.$mega.css("width",""),await e.sleep(30),0===i.$navLi.find(".mega-clip").length&&i.$navLi.append('<span class="mega-clip"></span>');var a=i.$mega.attr("data-width")||"";"full"===a?i.$mega.css("width",e.wrapperRect.width):a?i.$mega.css("width",a):i.$mega.css("width",""),e.calcItemCSS(i),e.settings.vertical?(i.$navLi.find(".mega-clip").css({width:i.liRect.width+100,height:i.megaItemHeight+100}),"left"===e.verAlign?(i.$arrow.removeClass("arr-left").addClass("arr-right"),i.$navLi.addClass("mega-v-right"),i.$mega.addClass("mega-v-right"),e.setupMegaVerticalPositionLeft(i)):(i.$arrow.addClass("arr-left").removeClass("arr-right"),e.setupMegaVerticalPosition(i))):(i.$navLi.find(".mega-clip").css({width:e.NavRect.width,height:180+e.settings.spacing}),e.setupMegaPosition(i)),e.isMobile&&i.$mega.removeAttr("style"),e.initEvents(i)})}maybeSetUpMegaTop(e,t){var i=this;i.isMobile?e.$mega.css({top:""}):e.$mega.css({top:t})}maybeCheckItemStuck(e){const t=this;let i=!1;if(t.stickyType){let i=t.$stickyEl.css("top");if(i){i=t.toInt(i);let a=t.$stickyEl.get(0).getBoundingClientRect(),s=i===a.y;$("body").toggleClass("mega-body-fixed",s),e.$mega.removeClass("mega-fixed")}}return i}async setupMegaPosition(e){var t=this;t.calcItemCSS(e);var i,a,s,o,n,r=e.align,l=e.$navLi.offset().top;let g=!1;switch(g=t.maybeCheckItemStuck(e),g&&(l=e.$navLi.position().top,e.$mega.addClass("mega-fixed")),i=l+e.$navLi.outerHeight()+t.settings.spacing,r){case"left":a=e.liRect.x,a+e.megaItemWidth>t.wrapperRect.right&&(a=(t.wrapperRect.right-e.megaItemWidth)/2);break;case"right":a=e.liRect.x+e.liRect.width,a-=e.megaItemWidth,a<t.wrapperRect.left&&(a=t.wrapperRect.left);break;default:if(a=e.liRect.x+e.liRect.width/2-e.megaItemWidth/2,a<t.NavRect.x&&(console.log("LEft: #"+e.id,a),a=t.NavRect.x),a+e.megaItemWidth>t.wrapperRect.right&&(console.log("LEft 2: #"+e.id,a),a=t.wrapperRect.right-e.megaItemWidth),"center"===t.navAlign){s=t.wrapperRect.right-(a+e.megaItemWidth);var c=(a+s)/2;c<e.center.x&&c+e.megaItemWidth>=e.center.x&&(a=c)}}o=Math.abs(a-e.liRect.x)+e.liRect.width/2-e.arrowWidth/2-e.border.top/2-1,n=-(e.arrowHeight-2*e.border.top),o<=0&&(o=0),0===e.border.top&&(console.log("item.border.top",e.border.top),n-=4),e.arrowPos={left:o,top:n},e.megaPos={left:a,top:i},e.relativeX=Math.abs(a-e.liRect.x)+e.liRect.width/2,t.maybeSetUpMegaTop(e,i)}setupMegaVerticalPosition(e){console.log("Item Vertical #"+e.id,e);var t,i,a,s,o=this;if(o.calcItemCSS(e),t=e.$navLi.offset().top-e.border.top,i=o.$NavMenu.offset().left+o.NavRect.width+o.settings.spacing,i+e.megaItemWidth>o.wrapperRect.right-o.settings.spacing&&(e.megaItemWidth=o.wrapperRect.right+e.border.right+e.border.left-i),t+e.megaItemHeight-(o.$NavMenu.offset().top+o.NavRect.height)>0){var n=t+e.megaItemHeight-(o.$NavMenu.offset().top+o.NavRect.height);t-=n}t+e.megaItemHeight<o.$NavMenu.offset().top+o.NavRect.height&&(t-=o.$NavMenu.offset().top,o.NavRect.height,e.megaItemHeight),t<o.$NavMenu.offset().top&&(t=o.$NavMenu.offset().top),a=Math.abs(i-e.liRect.x)+e.liRect.width/2-e.arrowWidth/2-e.border.top/2-1,s=Math.abs(t-e.$navLi.offset().top)+e.$navLi.height()/2,s<=0&&(s=0),e.arrowPos={left:a,top:s},e.megaPos={left:i,top:t},e.relativeX=Math.abs(i-e.liRect.x)+e.liRect.width/2,console.log("Item Setup VER #"+e.id,e),o.maybeSetUpMegaTop(e,t)}setupMegaVerticalPositionLeft(e){console.log("Item Vertical LEFT #"+e.id,e);var t,i,a,s,o=this;if(o.calcItemCSS(e),t=e.$navLi.offset().top-e.border.top,i=o.NavRect.x-e.megaItemWidth-o.settings.spacing-o.wrapperRect.left,i<o.wrapperRect.left&&(i=o.wrapperRect.left),i+e.megaItemWidth+o.settings.spacing>o.NavRect.x?e.megaItemWidth=o.NavRect.x-i-o.settings.spacing:i=o.NavRect.x-e.megaItemWidth-o.settings.spacing,t+e.megaItemHeight-(o.$NavMenu.offset().top+o.NavRect.height)>0){var n=t+e.megaItemHeight-(o.$NavMenu.offset().top+o.NavRect.height);t-=n}t+e.megaItemHeight<o.$NavMenu.offset().top+o.NavRect.height&&(t-=o.$NavMenu.offset().top+o.NavRect.height-(t+e.megaItemHeight)),t<o.$NavMenu.offset().top&&(t=o.$NavMenu.offset().top),a=Math.abs(i-e.liRect.x)+e.liRect.width/2-e.arrowWidth/2-e.border.top/2-1,s=Math.abs(t-e.$navLi.offset().top)+e.$navLi.height()/2,s<=0&&(s=0),e.arrowPos={left:a,top:s},e.megaPos={left:i,top:t},e.relativeX=Math.abs(i-e.liRect.x)+e.liRect.width/2,console.log("Item Setup LEFT #"+e.id,e),o.maybeSetUpMegaTop(e,t)}setupLayoutItem(e){var t=this;if(e.liRect=e.$navLi.get(0).getBoundingClientRect(),!t.isMobile&&(t.settings.vertical?e.$arrow.css({top:e.arrowPos.top}):e.$arrow.css({left:e.arrowPos.left}),e.$mega.css({width:e.megaItemWidth,top:e.megaPos.top,left:e.megaPos.left}),!t.settings.vertical&&"auto"===e.innerAlign)){var i=e.$mega.find("> .mega-inner"),a=i.outerWidth();if(a<e.megaItemWidth-(e.border.left+e.border.right)){var s=e.relativeX-a/2-e.border.left-e.border.right;if(s>=0){if(s+a>e.megaItemWidth){var o=s+a+(e.border.left+e.border.right)-e.megaItemWidth;s-=o}i.css({marginLeft:s})}}}}eventClickNavLiItem(e){var t=this;return async function(i){i.preventDefault(),t.isMobile||(t.showing,t.showing=!0),t.setupPositionForMegaMode(e),console.log("hover #",e.id),e.$navLi.addClass(t.activeClass),e.$mega.addClass(t.activeClass),t.isMobile?($("body").addClass("mega-mobile-activated"),t.$drop.addClass("drop-activated")):($("body").addClass("mega-desktop-activated"),t.stickyType)}}eventNavLiOut(e){var t=this;return function(i){var a=i.relatedTarget||i.toElement,s=$(a);console.log("ITEM OUT: ",s),s.is(e.$navLi)||s.is(e.$navLi)||s.is(e.$mega)||0!==e.$mega.has(s).length?(console.log("Out1: #"+e.id),s.is(e.$mega)||0!==e.$mega.has(s).length||(console.log("Out2: #"+e.id),t.closeBG())):(console.log("Out0: #"+e.id),t.closeMega(e,s,i),s.is(e.$mega)||0!==e.$mega.has(s).length||setTimeout(function(){console.log("LeaveBG: #"+e.id),0===t.$NavMenu.find("."+t.activeClass).length&&t.closeBG()},30)),e.timeoutClose&&clearTimeout(e.timeoutClose),e.timeoutClose=setTimeout(function(){console.log("Reset_Set_when_Close_LI"),t.setupPositionForMegaMode(e)},350)}}eventMegaOut(e){var t=this;return function(i){var a=i.relatedTarget||i.toElement,s=$(a);console.log("MEGA OUT: #"+e.id,s),s.is(e.$mega)||s.is(e.$navLi)||t.closeMega(e,s,i),s.is(".mega-enabled")||t.closeBG(),e.timeoutClose&&clearTimeout(e.timeoutClose),e.timeoutClose=setTimeout(function(){console.log("Reset_Set_when_MEGA_OUT"),t.setupPositionForMegaMode(e)},350)}}async setupPositionForMegaMode(e){var t=this;t.settings.vertical?"left"===t.verAlign?t.setupMegaVerticalPositionLeft(e):t.setupMegaVerticalPosition(e):await t.setupMegaPosition(e)}eventScroll(e){var t=this;return async function(){e._stt&&clearTimeout(e._stt),e._stt2&&clearTimeout(e._stt2),e.$mega.addClass("no-animate"),e._stt=setTimeout(function(){t.setupLayoutItem(e),console.log("RESET_POST_WHEN_REST #"+e.id),t.setupPositionForMegaMode(e),e._stt2=setTimeout(function(){e.$mega.removeClass("no-animate")},30)},30)}}initWindowResizeEvent(){var e=this;$(window).off(".megajsScroll"),$.each(e.megaItems,async function(t,i){$(window).on("scroll.megajsScroll",e.eventScroll(i))})}initEvents(e){const t=this;if(!t.isInstalled){if(e.$navLi.off(".megajs"),e.$mega.off(".megajs"),e.$header.off(".megajs"),t.setupLayoutItem(e),t.isMobile){let i=t.touchSupport?"click":"hover";e.$navLi.on(i+".megajs",t.eventClickNavLiItem(e))}else e.$navLi.on("mouseover.megajs",t.eventClickNavLiItem(e)),e.$navLi.on("mouseleave.megajs",t.eventNavLiOut(e)),e.$mega.on("mouseleave.megajs",t.eventMegaOut(e));e.$header.on("click.megajs",function(i){t.closeMega(e)})}}closeMega(e,t=null,i=null){var a=this;console.log("CLose OUT: #"+e.id),e.$mega.removeClass(a.activeClass),e.$navLi.removeClass(a.activeClass).removeClass("show").find("a").attr("aria-expanded","false"),a.$drop.removeClass("drop-activated"),a.isMobile}closeBG(){const e=this;e.showing=!1,$("body").removeClass("mega-desktop-activated mega-mobile-activated mega-body-fixed")}};return this.each(function(){new t($(this),e)})};